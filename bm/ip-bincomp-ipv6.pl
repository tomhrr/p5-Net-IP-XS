#!/usr/bin/perl

use warnings;
use strict;

use Net::IP;
use Net::IP::XS;

my @entries = (
    ['00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', 'lt', '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'],
    ['00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', 'gt', '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'],
    ['00100001010001001010010011101010001000010100010010100100111010100010000101000100101001001110101000100001010001001010010011101010', 'lt', '00100001010001001010101010101010001000010100010010101010101010100010000101000100101010101010101000100001010001001010101010101010'],
    ['00100001010001001010010011101010001000010100010010100100111010100010000101000100101001001110101000100001010001001010010011101010', 'le', '00100001010001001010101010101010001000010100010010101010101010100010000101000100101010101010101000100001010001001010101010101010'],
    ['00100001010001001010010011101010001000010100010010100100111010100010000101000100101001001110101000100001010001001010010011101010', 'gt', '00100001010001001010101010101010001000010100010010101010101010100010000101000100101010101010101000100001010001001010101010101010'],
    ['00100001010001001010010011101010001000010100010010100100111010100010000101000100101001001110101000100001010001001010010011101010', 'ge', '00100001010001001010101010101010001000010100010010101010101010100010000101000100101010101010101000100001010001001010101010101010'],
    ['10010101010101010101010101010100100101010101010101010101010101001001010101010101010101010101010010010101010101010101010101010100', 'lt', '10010101010100010100010101010100100101010101000101000101010101001001010101010001010001010101010010010101010100010100010101010100'],
    ['00000100101010101010101010101011000001001010101010101010101010110000010010101010101010101010101100000100101010101010101010101011', 'le', '00000101001001010111010110111110000001010010010101110101101111100000010100100101011101011011111000000101001001010111010110111110'],
    ['10010101010101010101010101010100100101010101010101010101010101001001010101010101010101010101010010010101010101010101010101010100', 'gt', '10010101010100010100010101010100100101010101000101000101010101001001010101010001010001010101010010010101010100010100010101010100'],
    ['00000100101010101010101010101011000001001010101010101010101010110000010010101010101010101010101100000100101010101010101010101011', 'ge', '00000101001001010111010110111110000001010010010101110101101111100000010100100101011101011011111000000101001001010111010110111110'],
);

my ($type, $count) = @ARGV;
$count ||= 20000;

if ($type eq 'net-ip') {
    for (1..$count) {
        for my $entry (@entries) {
            my ($binstr1, $op, $binstr2) = @{$entry};
            Net::IP::ip_bincomp($binstr1, $op, $binstr2);
        }
    }
} elsif ($type eq 'net-ip-xs') {
    for (1..$count) {
        for my $entry (@entries) {
            my ($binstr1, $op, $binstr2) = @{$entry};
            Net::IP::XS::ip_bincomp($binstr1, $op, $binstr2);
        }
    }
} else {
    die "invalid type $type";
}

1;
